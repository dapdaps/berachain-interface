"use client";

import { AnimatePresence, motion } from "framer-motion";
import React, { useEffect, useMemo, useRef, useState } from "react";
import dAppArrowIcon from "@public/images/map/arrow-dApps.svg";
import caveArrowIcon from "@public/images/map/arrow-cave.svg";
import BridgeArrowIcon from "@public/images/map/arrow-bridge.svg";
import MarketPlaceArrowIcon from "@public/images/map/arrow-marketplace.svg";
import beramasArrowIcon from "@public/images/map/arrow-beramas.svg";
import { useRouter } from "next/navigation";
import useMapModalStore from "@/stores/useMapModalStore";
import ReactDOM from "react-dom";
import IconClose from "@public/images/modal/close.svg";
import useClickTracking from "@/hooks/use-click-tracking";
import { useChristmas } from "@/hooks/use-christmas";


const dAppClipPath =
  "M208.51 2.66199L11.7263 105.652C4.70802 109.325 0.518966 116.794 1.04422 124.698L9.26083 248.338C10.0286 259.891 20.4165 268.381 31.8913 266.832L216.615 241.906C217.657 241.765 218.686 241.543 219.693 241.24L391.866 189.54C393.732 188.979 395.67 188.695 397.618 188.695H500.741C507.282 188.695 513.409 185.496 517.149 180.13L537.43 151.031C542.356 143.964 542.203 134.536 537.05 127.632L472.685 41.3992C469.483 37.1095 464.695 34.2824 459.392 33.5503L220.519 0.569798C216.396 0.000507072 212.198 0.731888 208.51 2.66199Z";

const marketplaceClipPath =
  "M147.135 18.3991L14.6643 64.0477C6.59561 66.8281 1.18018 74.4222 1.18018 82.9565V86.043L13.9879 234.386C14.7051 242.692 20.4993 249.682 28.5283 251.926L306.429 329.629C314.16 331.79 322.433 329.121 327.443 322.848L426.672 198.596C431.292 192.811 432.338 184.948 429.392 178.156L363.4 26.0377C361.1 20.7366 356.62 16.6892 351.113 14.938L307.285 0.999684C304.579 0.139263 301.722 -0.135279 298.902 0.194316L151.329 17.4431C149.901 17.6101 148.494 17.9306 147.135 18.3991Z";

const bridgeClipPathChristmas =
  "M167.651 28.237L58.901 132.098C56.8972 134.012 55.313 136.321 54.2487 138.879L2.43848 263.41C-2.74115 275.86 5.63204 289.763 19.0588 291.007L339.942 320.74C341.802 320.913 343.676 320.824 345.511 320.476L610.736 270.226C625.596 267.411 632.075 249.756 622.562 237.997L517.867 108.579C512.308 101.708 511.919 92.0024 516.909 84.7078L540.482 50.2482C548.883 37.9677 541.411 21.1406 526.667 19.1379L395.493 1.32007C393.928 1.10744 392.343 1.08102 390.771 1.24137L179.435 22.8038C175.012 23.255 170.866 25.1668 167.651 28.237Z";

const bridgeClipPath =
  "M149.983 3.51947L53.9979 60.793C50.3108 62.9931 47.4296 66.3214 45.7803 70.2856L2.61807 174.034C-2.56137 186.484 5.81183 200.387 19.2384 201.631L297.614 227.426C299.536 227.604 301.472 227.503 303.365 227.126L419.943 203.918C432.372 201.443 439.395 188.181 434.458 176.51L365.241 12.9018C362.111 5.50224 354.856 0.694336 346.822 0.694336H285.945H160.231C156.623 0.694336 153.082 1.67053 149.983 3.51947Z";

const dashboardClipPath =
  "M180.262 33.444L180.19 32.9493L180.115 33.9219L180.262 33.444ZM201.351 28.5774L201.074 28.1614L201.074 28.1614L201.351 28.5774ZM211.084 1L211.583 0.961598L211.453 -0.726993L210.645 0.761486L211.084 1ZM223.837 27.212L223.523 27.6011L223.745 27.7802L224.012 27.6803L223.837 27.212ZM259.975 13.7025L259.8 13.2342L259.8 13.2342L259.975 13.7025ZM285.901 25.9613L285.428 26.1231L285.428 26.1231L285.901 25.9613ZM335.435 170.719L334.961 170.881L334.962 170.881L335.435 170.719ZM336.053 181.454L335.564 181.347L335.564 181.347L336.053 181.454ZM317.049 268.623L317.538 268.73L317.538 268.73L317.049 268.623ZM301.302 284L301.397 284.491L301.397 284.491L301.302 284ZM82.8066 326.215L82.7117 325.724L82.7117 325.724L82.8066 326.215ZM75.2971 324.704L75.5744 324.288L75.5744 324.288L75.2971 324.704ZM71.5692 320.162L71.107 320.352L71.107 320.352L71.5692 320.162ZM5.5159 160.267L5.97803 160.076L5.97803 160.076L5.5159 160.267ZM10.3144 138.047L9.97228 137.683L9.97228 137.683L10.3144 138.047ZM62.3165 89.2453L62.6586 89.6099L62.6586 89.6099L62.3165 89.2453ZM68.9995 85.0952L68.8244 84.6269L68.8244 84.6269L68.9995 85.0952ZM159.301 51.3375L159.477 51.8058L159.626 51.7501L159.715 51.6184L159.301 51.3375ZM160.589 49.3307L161.017 49.5892L161.083 49.4801L161.088 49.3527L160.589 49.3307ZM160.826 43.962L161.325 43.984L161.39 42.5143L160.443 43.6401L160.826 43.962ZM153.673 50.2194L153.396 49.8034L153.396 49.8034L153.673 50.2194ZM135.153 54.4934L135.08 53.9987L135.006 54.9713L135.153 54.4934ZM162.221 26L162.72 25.9616L162.59 24.273L161.782 25.7615L162.221 26ZM171.11 46.9231L170.753 47.2738L170.981 47.5051L171.285 47.3915L171.11 46.9231ZM204.175 34.5622L204.35 35.0305L204.473 34.9849L204.557 34.8853L204.175 34.5622ZM209.225 27.5656L209.653 27.8241L209.719 27.715L209.725 27.5877L209.225 27.5656ZM209.495 21.4524L209.995 21.4744L210.06 20.0047L209.113 21.1305L209.495 21.4524ZM211.226 31.2983L210.726 31.3157L210.728 31.3748L210.744 31.4319L211.226 31.2983ZM211.39 31.8651L210.911 32.0097L211.066 32.5202L211.565 32.3335L211.39 31.8651ZM210.874 21.1649L211.246 20.8308L210.327 19.8068L210.375 21.1822L210.874 21.1649ZM220.359 28.5121L220.534 28.9805L221.571 28.5929L220.595 28.0712L220.359 28.5121ZM162.037 43.7094L162.409 43.3753L161.49 42.3513L161.537 43.7267L162.037 43.7094ZM167.361 48.3247L167.536 48.7931L168.433 48.4576L167.645 47.9133L167.361 48.3247ZM162.263 50.2302L161.764 50.2476L161.788 50.9418L162.438 50.6986L162.263 50.2302ZM180.115 33.9219C183.786 35.0515 192.66 34.9724 201.628 28.9935L201.074 28.1614C192.332 33.9892 183.768 33.9995 180.409 32.9661L180.115 33.9219ZM210.645 0.761486C207.866 5.88084 203.416 13.4859 198.055 20.0416C192.672 26.6243 186.464 32.0312 180.19 32.9493L180.335 33.9388C187.013 32.9615 193.431 27.2755 198.829 20.6746C204.249 14.0468 208.734 6.37751 211.524 1.23851L210.645 0.761486ZM224.151 26.8229C218.479 22.2458 212.59 14.0371 211.583 0.961598L210.586 1.0384C211.615 14.4059 217.65 22.8622 223.523 27.6011L224.151 26.8229ZM259.8 13.2342L223.662 26.7436L224.012 27.6803L260.15 14.1709L259.8 13.2342ZM286.374 25.7994C282.636 14.8742 270.616 9.19083 259.8 13.2342L260.15 14.1709C270.438 10.3248 281.872 15.7309 285.428 26.1231L286.374 25.7994ZM335.908 170.557L286.374 25.7994L285.428 26.1231L334.961 170.881L335.908 170.557ZM336.541 181.56C337.339 177.903 337.119 174.098 335.908 170.557L334.962 170.881C336.114 174.249 336.323 177.869 335.564 181.347L336.541 181.56ZM317.538 268.73L336.541 181.56L335.564 181.347L316.56 268.517L317.538 268.73ZM301.397 284.491C309.444 282.936 315.792 276.738 317.538 268.73L316.56 268.517C314.9 276.134 308.862 282.03 301.207 283.509L301.397 284.491ZM82.9014 326.706L301.397 284.491L301.207 283.509L82.7117 325.724L82.9014 326.706ZM75.0197 325.12C77.3363 326.664 80.1678 327.234 82.9014 326.706L82.7117 325.724C80.2363 326.202 77.6722 325.686 75.5744 324.288L75.0197 325.12ZM71.107 320.352C71.9093 322.295 73.2714 323.954 75.0197 325.12L75.5744 324.288C73.9912 323.232 72.7578 321.729 72.0313 319.971L71.107 320.352ZM5.05378 160.458L71.107 320.352L72.0313 319.971L5.97803 160.076L5.05378 160.458ZM9.97228 137.683C3.75832 143.514 1.80009 152.582 5.05378 160.458L5.97803 160.076C2.88305 152.584 4.74575 143.959 10.6566 138.412L9.97228 137.683ZM61.9743 88.8807L9.97228 137.683L10.6566 138.412L62.6586 89.6099L61.9743 88.8807ZM68.8244 84.6269C66.2819 85.5774 63.9535 87.0232 61.9743 88.8807L62.6586 89.6099C64.5413 87.843 66.7561 86.4677 69.1745 85.5636L68.8244 84.6269ZM159.126 50.8691L68.8244 84.6269L69.1745 85.5636L159.477 51.8058L159.126 50.8691ZM160.161 49.0722C159.768 49.7222 159.344 50.3853 158.888 51.0566L159.715 51.6184C160.181 50.9326 160.615 50.2546 161.017 49.5892L160.161 49.0722ZM160.326 43.9399L160.089 49.3086L161.088 49.3527L161.325 43.984L160.326 43.9399ZM153.951 50.6354C157.737 48.111 160.115 45.5837 161.209 44.2838L160.443 43.6401C159.397 44.8836 157.088 47.342 153.396 49.8034L153.951 50.6354ZM135.006 54.9713C138.249 55.9692 146.061 55.8955 153.951 50.6354L153.396 49.8034C145.733 54.9123 138.23 54.9172 135.3 54.0155L135.006 54.9713ZM161.782 25.7615C159.342 30.2563 155.436 36.9314 150.732 42.6844C146.005 48.4645 140.566 53.196 135.08 53.9987L135.225 54.9882C141.115 54.1263 146.764 49.1157 151.506 43.3175C156.27 37.4922 160.211 30.7529 162.661 26.2385L161.782 25.7615ZM171.466 46.5725C167.295 42.332 163.469 35.6838 162.72 25.9616L161.723 26.0384C162.49 36.0029 166.421 42.8703 170.753 47.2738L171.466 46.5725ZM204 34.0939L170.935 46.4548L171.285 47.3915L204.35 35.0305L204 34.0939ZM208.797 27.3071C207.452 29.535 205.778 31.8961 203.794 34.2391L204.557 34.8853C206.575 32.5019 208.28 30.0975 209.653 27.8241L208.797 27.3071ZM208.996 21.4303L208.726 27.5435L209.725 27.5877L209.995 21.4744L208.996 21.4303ZM201.628 28.9935C205.933 26.1234 208.636 23.2504 209.878 21.7743L209.113 21.1305C207.918 22.5503 205.284 25.3544 201.074 28.1614L201.628 28.9935ZM210.744 31.4319C210.798 31.6264 210.854 31.819 210.911 32.0097L211.869 31.7206C211.813 31.5372 211.76 31.3519 211.708 31.1647L210.744 31.4319ZM210.375 21.1822L210.726 31.3157L211.726 31.281L211.374 21.1476L210.375 21.1822ZM220.595 28.0712C216.434 25.8468 213.133 22.9322 211.246 20.8308L210.502 21.4989C212.456 23.675 215.846 26.6668 220.124 28.9531L220.595 28.0712ZM211.565 32.3335L220.534 28.9805L220.184 28.0438L211.215 31.3968L211.565 32.3335ZM161.665 44.0434C162.89 45.4079 164.752 47.1318 167.077 48.7362L167.645 47.9133C165.386 46.3543 163.583 44.6827 162.409 43.3753L161.665 44.0434ZM162.763 50.2129L162.537 43.6921L161.537 43.7267L161.764 50.2476L162.763 50.2129ZM167.185 47.8564L162.088 49.7619L162.438 50.6986L167.536 48.7931L167.185 47.8564Z";

 const bgtClipPath = "M125.983 33.5687L125.976 33.0688L125.976 33.0688L125.983 33.5687ZM121.812 33.6059H121.312V34.1028L121.809 34.1059L121.812 33.6059ZM140.278 35.2994L139.887 35.6108L139.887 35.6108L140.278 35.2994ZM152.37 36.3525L152.426 36.8494L152.426 36.8494L152.37 36.3525ZM154.991 36.0857H155.491V35.548L154.955 35.587L154.991 36.0857ZM154.991 41.5677H154.491V42.3695L155.211 42.0166L154.991 41.5677ZM240.427 -0.305664L240.652 -0.752591L240.43 -0.863749L240.207 -0.754639L240.427 -0.305664ZM279.002 19.0435L278.778 19.4905L278.935 19.5689L279.106 19.5327L279.002 19.0435ZM317.031 10.9956L317.135 11.4847L317.135 11.4847L317.031 10.9956ZM328.968 12.144L329.163 11.6836L329.163 11.6836L328.968 12.144ZM387.407 36.8788L387.212 37.3392L387.323 37.3862L387.443 37.3775L387.407 36.8788ZM391.482 36.4709L391.538 36.9677L391.544 36.9671L391.482 36.4709ZM391.482 36.4709L391.425 35.9741L391.42 35.9748L391.482 36.4709ZM394.18 36.193H394.68V35.6549L394.143 35.6943L394.18 36.193ZM394.18 39.7455H393.68V40.0768L393.985 40.206L394.18 39.7455ZM418.476 50.0288L418.281 50.4892L418.281 50.4892L418.476 50.0288ZM417.947 199.16L418.129 199.626L418.129 199.626L417.947 199.16ZM284.185 251.327L284.003 250.862L284.003 250.862L284.185 251.327ZM62.5361 242.093L62.9775 241.858L62.9775 241.858L62.5361 242.093ZM3.72153 131.617L3.28017 131.852L3.28017 131.852L3.72153 131.617ZM12.2445 104.424L12.0162 103.98L12.0162 103.98L12.2445 104.424ZM105.803 56.414L105.575 55.9691L105.575 55.9691L105.803 56.414ZM110.794 54.6412L110.69 54.1521L110.69 54.1521L110.794 54.6412ZM118.95 52.9151L119.053 53.4043L119.45 53.3204V52.9151H118.95ZM118.95 33.3692H119.45V33.0192L119.121 32.8994L118.95 33.3692ZM121.812 32.6419L121.438 32.3105L121.312 32.4524V32.6419H121.812ZM125.976 33.0688C124.51 33.0918 123.097 33.1139 121.815 33.1059L121.809 34.1059C123.104 34.114 124.529 34.0916 125.991 34.0686L125.976 33.0688ZM140.669 34.988C140.183 34.3772 139.343 33.9865 138.373 33.719C137.386 33.4466 136.174 33.2786 134.844 33.176C132.185 32.9708 128.971 33.0217 125.976 33.0688L125.991 34.0686C129 34.0214 132.164 33.9721 134.767 34.173C136.069 34.2735 137.209 34.4352 138.107 34.683C139.024 34.9358 139.604 35.256 139.887 35.6108L140.669 34.988ZM152.314 35.8557C150.158 36.0995 147.611 36.3867 145.386 36.3411C144.274 36.3182 143.266 36.2124 142.441 35.9868C141.61 35.7598 141.018 35.4261 140.669 34.988L139.887 35.6108C140.422 36.2831 141.246 36.6969 142.177 36.9514C143.113 37.2074 144.212 37.3172 145.365 37.3408C147.67 37.3881 150.285 37.0915 152.426 36.8494L152.314 35.8557ZM154.955 35.587C154.21 35.6412 153.3 35.7441 152.314 35.8557L152.426 36.8494C153.42 36.737 154.307 36.6368 155.028 36.5844L154.955 35.587ZM155.491 41.5677V36.0857H154.491V41.5677H155.491ZM240.207 -0.754639L154.771 41.1187L155.211 42.0166L240.648 0.143311L240.207 -0.754639ZM279.227 18.5966L240.652 -0.752591L240.203 0.141263L278.778 19.4905L279.227 18.5966ZM316.928 10.5064L278.899 18.5544L279.106 19.5327L317.135 11.4847L316.928 10.5064ZM329.163 11.6836C325.301 10.049 321.031 9.63816 316.928 10.5064L317.135 11.4847C321.037 10.6588 325.099 11.0497 328.773 12.6045L329.163 11.6836ZM387.602 36.4183L329.163 11.6836L328.773 12.6045L387.212 37.3392L387.602 36.4183ZM391.425 35.9742C390.162 36.1187 388.767 36.2783 387.371 36.3801L387.443 37.3775C388.863 37.2739 390.279 37.1118 391.538 36.9677L391.425 35.9742ZM391.42 35.9748L391.42 35.9748L391.544 36.9671L391.544 36.967L391.42 35.9748ZM394.143 35.6943C393.376 35.7508 392.441 35.8579 391.425 35.9741L391.539 36.9677C392.561 36.8507 393.474 36.7463 394.217 36.6917L394.143 35.6943ZM394.68 39.7455V36.193H393.68V39.7455H394.68ZM418.671 49.5683L394.375 39.285L393.985 40.206L418.281 50.4892L418.671 49.5683ZM431.18 68.4469C431.18 60.2128 426.253 52.7778 418.671 49.5683L418.281 50.4892C425.494 53.5421 430.18 60.6145 430.18 68.4469H431.18ZM431.18 180.527V68.4469H430.18V180.527H431.18ZM418.129 199.626C425.999 196.557 431.18 188.974 431.18 180.527H430.18C430.18 188.562 425.251 195.775 417.765 198.694L418.129 199.626ZM284.367 251.793L418.129 199.626L417.765 198.694L284.003 250.862L284.367 251.793ZM276.918 253.194C279.466 253.194 281.992 252.719 284.367 251.793L284.003 250.862C281.745 251.742 279.342 252.194 276.918 252.194V253.194ZM80.1902 253.194H276.918V252.194H80.1902V253.194ZM62.0948 242.328C65.6551 249.016 72.6138 253.194 80.1902 253.194V252.194C72.9834 252.194 66.3641 248.219 62.9775 241.858L62.0948 242.328ZM3.28017 131.852L62.0948 242.328L62.9775 241.858L4.16288 131.382L3.28017 131.852ZM12.0162 103.98C1.83559 109.204 -2.09715 121.751 3.28017 131.852L4.16288 131.382C-0.952137 121.774 2.78876 109.839 12.4728 104.869L12.0162 103.98ZM105.575 55.9691L12.0162 103.98L12.4728 104.869L106.032 56.8588L105.575 55.9691ZM110.69 54.1521C108.912 54.5284 107.192 55.1394 105.575 55.9691L106.032 56.8588C107.57 56.0696 109.206 55.4883 110.897 55.1304L110.69 54.1521ZM118.846 52.426L110.69 54.1521L110.897 55.1304L119.053 53.4043L118.846 52.426ZM118.45 33.3692V52.9151H119.45V33.3692H118.45ZM119.121 32.8994C118.306 32.6025 117.725 31.8205 117.725 30.9042H116.725C116.725 32.2542 117.581 33.4028 118.779 33.839L119.121 32.8994ZM117.725 30.9042C117.725 29.7319 118.675 28.7816 119.848 28.7816V27.7816C118.123 27.7816 116.725 29.1796 116.725 30.9042H117.725ZM119.848 28.7816C121.02 28.7816 121.97 29.7319 121.97 30.9042H122.97C122.97 29.1796 121.572 27.7816 119.848 27.7816V28.7816ZM121.97 30.9042C121.97 31.444 121.769 31.9357 121.438 32.3105L122.186 32.9734C122.674 32.4228 122.97 31.6975 122.97 30.9042H121.97ZM122.312 33.6059V32.6419H121.312V33.6059H122.312Z" 

 const earnClipPath = "M293.058 24.582L292.619 24.3422L292.616 24.3478L293.058 24.582ZM287.806 36.5715L287.31 36.6376L288.276 36.742L287.806 36.5715ZM293.058 24.5816L293.497 24.8213L293.499 24.8158L293.058 24.5816ZM320.554 2.1871L320.498 1.69029L320.498 1.69029L320.554 2.1871ZM323.9 2L323.9 1.5L323.9 1.5L323.9 2ZM360.038 38.1943L359.564 38.3517L359.677 38.6943H360.038V38.1943ZM434.372 47.6123L433.948 47.8769L433.948 47.8769L434.372 47.6123ZM466.186 98.6336L466.61 98.369L466.61 98.369L466.186 98.6336ZM453.11 128.832L453.013 128.342L453.013 128.342L453.11 128.832ZM270.428 165.113L270.526 165.603L270.526 165.603L270.428 165.113ZM264.869 167.106L264.633 166.665L264.633 166.665L264.869 167.106ZM157.75 224.573L157.514 224.132L157.514 224.132L157.75 224.573ZM143.558 226.38L143.676 225.894L143.676 225.894L143.558 226.38ZM53.5524 204.436L53.6708 203.951L53.6708 203.951L53.5524 204.436ZM40.113 176.662L39.6586 176.454L39.6586 176.454L40.113 176.662ZM52.5186 149.636L52.0642 149.427L52.0642 149.427L52.5186 149.636ZM49.2162 127.922L49.5881 127.588L49.2162 127.922ZM5.7056 79.5169L6.07745 79.1826L6.07745 79.1826L5.7056 79.5169ZM19.3681 46.1835L19.3379 45.6845L19.3379 45.6845L19.3681 46.1835ZM105.395 40.9622L105.426 41.4613L105.651 41.4477L105.79 41.2698L105.395 40.9622ZM122.985 30.7409L123.017 31.2399L123.017 31.2399L122.985 30.7409ZM141.534 38.7688L141.163 39.1042L141.325 39.2825L141.565 39.2679L141.534 38.7688ZM151 38.1943V37.6943H150.985L150.97 37.6953L151 38.1943ZM185.81 38.1943V38.6943H186.457L186.294 38.0681L185.81 38.1943ZM185.762 38.0112L185.464 37.6102L185.193 37.8115L185.278 38.1375L185.762 38.0112ZM186.491 37.4682L186.79 37.8692L186.791 37.8682L186.491 37.4682ZM186.493 37.4666L186.195 37.0656L186.193 37.0666L186.493 37.4666ZM198.22 28.7332L198.519 29.1342L198.519 29.1342L198.22 28.7332ZM199.265 27.9549L199.439 27.4864L199.184 27.3914L198.966 27.5539L199.265 27.9549ZM214.11 33.4836L214.61 33.4926L214.617 33.1386L214.285 33.015L214.11 33.4836ZM214.026 38.1943L213.526 38.1853L213.517 38.6943H214.026V38.1943ZM218.063 38.1943V38.6943H218.439L218.543 38.3329L218.063 38.1943ZM218.644 36.18L218.592 35.6827L218.257 35.7174L218.163 36.0414L218.644 36.18ZM244.013 33.5556L244.043 33.0565L244.002 33.0541L243.962 33.0583L244.013 33.5556ZM287.754 36.18L288.249 36.1139L288.195 35.7056L287.784 35.6809L287.754 36.18ZM292.616 24.3478C290.626 28.1003 288.874 32.1594 287.336 36.4011L288.276 36.742C289.801 32.536 291.535 28.5207 293.499 24.8162L292.616 24.3478ZM292.619 24.3419L292.619 24.3422L293.496 24.8217L293.497 24.8213L292.619 24.3419ZM320.498 1.69029C308.118 3.09593 299.089 12.1379 292.616 24.3474L293.499 24.8158C299.905 12.7342 308.707 4.03543 320.61 2.6839L320.498 1.69029ZM323.9 1.5C322.74 1.50005 321.606 1.56446 320.498 1.69029L320.61 2.6839C321.681 2.56239 322.777 2.50005 323.9 2.5L323.9 1.5ZM323.901 1.5H323.9V2.5H323.901V1.5ZM360.513 38.037C357.192 28.0185 352.699 18.8976 346.711 12.2736C340.714 5.63834 333.207 1.5 323.901 1.5V2.5C332.869 2.5 340.121 6.47441 345.969 12.9441C351.827 19.425 356.266 28.4013 359.564 38.3517L360.513 38.037ZM417.401 37.6943H360.038V38.6943H417.401V37.6943ZM434.797 47.3478C431.053 41.3434 424.477 37.6943 417.401 37.6943V38.6943C424.132 38.6943 430.387 42.1654 433.948 47.8769L434.797 47.3478ZM466.61 98.369L434.797 47.3478L433.948 47.8769L465.761 98.8981L466.61 98.369ZM453.208 129.323C467.27 126.53 474.196 110.535 466.61 98.369L465.761 98.8981C472.977 110.47 466.389 125.686 453.013 128.342L453.208 129.323ZM270.526 165.603L453.208 129.323L453.013 128.342L270.331 164.622L270.526 165.603ZM265.106 167.546C266.806 166.634 268.633 165.979 270.526 165.603L270.331 164.622C268.341 165.018 266.421 165.706 264.633 166.665L265.106 167.546ZM157.986 225.014L265.106 167.546L264.633 166.665L157.514 224.132L157.986 225.014ZM143.439 226.866C148.351 228.063 153.532 227.404 157.986 225.014L157.514 224.132C153.276 226.406 148.348 227.033 143.676 225.894L143.439 226.866ZM53.4339 204.922L143.439 226.866L143.676 225.894L53.6708 203.951L53.4339 204.922ZM39.6586 176.454C34.2836 188.164 40.916 201.87 53.4339 204.922L53.6708 203.951C41.7635 201.048 35.4546 188.009 40.5675 176.871L39.6586 176.454ZM52.0642 149.427L39.6586 176.454L40.5675 176.871L52.973 149.844L52.0642 149.427ZM48.8444 128.257C54.043 134.04 55.3083 142.36 52.0642 149.427L52.973 149.844C56.3835 142.414 55.0533 133.668 49.5881 127.588L48.8444 128.257ZM5.33374 79.8511L48.8444 128.257L49.5881 127.588L6.07745 79.1826L5.33374 79.8511ZM19.3379 45.6845C2.21017 46.724 -6.13723 67.0897 5.33374 79.8511L6.07745 79.1826C-4.83396 67.0437 3.10625 47.6715 19.3984 46.6826L19.3379 45.6845ZM105.365 40.4632L19.3379 45.6845L19.3984 46.6826L105.426 41.4613L105.365 40.4632ZM122.953 30.2419C115.537 30.7168 109.639 34.7084 105.001 40.6547L105.79 41.2698C110.307 35.4788 115.964 31.6915 123.017 31.2399L122.953 30.2419ZM124.451 30.1943C123.946 30.1943 123.446 30.2103 122.953 30.2419L123.017 31.2399C123.488 31.2097 123.967 31.1943 124.451 31.1943V30.1943ZM141.905 38.4335C137.321 33.3635 131.575 30.1943 124.451 30.1943V31.1943C131.238 31.1943 136.729 34.1997 141.163 39.1042L141.905 38.4335ZM150.97 37.6953L141.504 38.2698L141.565 39.2679L151.03 38.6934L150.97 37.6953ZM185.81 37.6943H151V38.6943H185.81V37.6943ZM185.278 38.1375L185.326 38.3206L186.294 38.0681L186.246 37.885L185.278 38.1375ZM186.193 37.0672L185.464 37.6102L186.061 38.4122L186.79 37.8692L186.193 37.0672ZM186.193 37.0666L186.191 37.0682L186.791 37.8682L186.793 37.8666L186.193 37.0666ZM197.921 28.3322L186.195 37.0656L186.792 37.8676L198.519 29.1342L197.921 28.3322ZM198.966 27.5539L197.921 28.3322L198.519 29.1342L199.564 28.3559L198.966 27.5539ZM214.285 33.015L199.439 27.4864L199.09 28.4235L213.936 33.9521L214.285 33.015ZM214.526 38.2033L214.61 33.4926L213.611 33.4746L213.526 38.1853L214.526 38.2033ZM218.063 37.6943H214.026V38.6943H218.063V37.6943ZM218.163 36.0414L217.582 38.0558L218.543 38.3329L219.124 36.3186L218.163 36.0414ZM243.962 33.0583L218.592 35.6827L218.695 36.6774L244.065 34.053L243.962 33.0583ZM287.784 35.6809L244.043 33.0565L243.983 34.0547L287.724 36.6791L287.784 35.6809ZM288.301 36.5054L288.249 36.1139L287.258 36.2461L287.31 36.6376L288.301 36.5054Z"

 const caveClipPath = "M172.679 20.9318L173.177 20.8911L173.177 20.8911L172.679 20.9318ZM184.365 164.167L183.867 164.207L183.896 164.565L184.244 164.652L184.365 164.167ZM145.814 3.14369L145.694 2.65833L145.694 2.65833L145.814 3.14369ZM77.1157 20.1435L76.7849 20.5185L76.9814 20.6918L77.2358 20.6289L77.1157 20.1435ZM55.7806 12.0581L55.7806 11.5581L55.7806 11.5581L55.7806 12.0581ZM53.0644 12.1622L53.1031 12.6607L53.1031 12.6607L53.0644 12.1622ZM28.1583 26.7906L28.5574 27.0919L28.5574 27.0919L28.1583 26.7906ZM25.811 30.1634L25.3903 29.8931L25.3429 29.967L25.3234 30.0526L25.811 30.1634ZM25.811 30.1634L26.2316 30.4337L26.2791 30.3598L26.2986 30.2742L25.811 30.1634ZM23.923 33.3065L24.0431 33.7918L24.253 33.7399L24.3589 33.5514L23.923 33.3065ZM15.8758 35.2978L15.7557 34.8124L15.7557 34.8124L15.8758 35.2978ZM3.94288 260.546L3.52445 260.82L3.52445 260.82L3.94288 260.546ZM38.7591 313.771L39.1775 313.497L39.1775 313.497L38.7591 313.771ZM54.0571 322.771L54.0212 323.269L54.0212 323.269L54.0571 322.771ZM278.153 338.938L278.189 338.439L278.189 338.439L278.153 338.938ZM298.577 325.281L299.051 325.438L299.051 325.438L298.577 325.281ZM315.144 275.282L314.67 275.125L314.67 275.125L315.144 275.282ZM301.72 249.78L301.581 250.261L301.581 250.261L301.72 249.78ZM259.812 237.649L259.411 237.947L259.511 238.082L259.673 238.129L259.812 237.649ZM253.216 234.418L252.728 234.527L252.82 234.937L253.241 234.917L253.216 234.418ZM253.16 234.163L252.672 234.272L252.672 234.272L253.16 234.163ZM252.963 233.331L252.551 233.047L252.424 233.233L252.478 233.451L252.963 233.331ZM253.531 228.411L253.124 228.701L253.124 228.701L253.531 228.411ZM250.647 226.755L250.194 226.966L250.306 227.209L250.571 227.25L250.647 226.755ZM233.836 209.443L233.372 209.628L233.442 209.805L233.612 209.89L233.836 209.443ZM225.139 198.566L224.856 198.978L224.856 198.978L225.139 198.566ZM221.797 196.268L222.08 195.856L222.08 195.856L221.797 196.268ZM210.706 184.344L210.275 184.596L210.275 184.596L210.706 184.344ZM210.23 183.531L210.661 183.278L210.661 183.278L210.23 183.531ZM172.181 20.9725L183.867 164.207L184.863 164.126L173.177 20.8911L172.181 20.9725ZM152.745 3.05811C162.9 3.05811 171.355 10.8514 172.181 20.9725L173.177 20.8911C172.309 10.251 163.421 2.05811 152.745 2.05811V3.05811ZM150.618 3.05811H152.745V2.05811H150.618V3.05811ZM145.934 3.62906C147.466 3.24982 149.039 3.05811 150.618 3.05811V2.05811C148.958 2.05811 147.305 2.25966 145.694 2.65833L145.934 3.62906ZM77.2358 20.6289L145.934 3.62906L145.694 2.65833L76.9956 19.6582L77.2358 20.6289ZM55.7808 12.5581C64.2881 12.5581 71.1946 15.5864 76.7849 20.5185L77.4465 19.7686C71.6883 14.6884 64.5508 11.5581 55.7808 11.5581V12.5581ZM55.7806 12.5581H55.7808V11.5581H55.7806V12.5581ZM53.1031 12.6607C53.9778 12.5928 54.8702 12.5581 55.7806 12.5581L55.7806 11.5581C54.8448 11.5581 53.9266 11.5938 53.0257 11.6637L53.1031 12.6607ZM28.5574 27.0919C34.6223 19.0593 42.63 13.4738 53.1031 12.6607L53.0257 11.6637C42.1974 12.5044 33.9499 18.2903 27.7593 26.4894L28.5574 27.0919ZM26.2317 30.4337C26.9729 29.2799 27.7478 28.1642 28.5574 27.0919L27.7593 26.4894C26.9336 27.5829 26.1444 28.7195 25.3903 29.8931L26.2317 30.4337ZM26.2986 30.2742L26.2986 30.2742L25.3234 30.0526L25.3234 30.0526L26.2986 30.2742ZM24.3589 33.5514C24.9578 32.4856 25.5818 31.4451 26.2316 30.4337L25.3903 29.8931C24.7293 30.922 24.0952 31.9795 23.4871 33.0615L24.3589 33.5514ZM15.9959 35.7832L24.0431 33.7918L23.8029 32.8211L15.7557 34.8124L15.9959 35.7832ZM1.18005 54.7122C1.18005 45.7469 7.29309 37.9367 15.9959 35.7832L15.7557 34.8124C6.60658 37.0765 0.180054 45.2871 0.180054 54.7122H1.18005ZM1.18005 249.598V54.7122H0.180054V249.598H1.18005ZM4.36131 260.272C2.28558 257.099 1.18005 253.39 1.18005 249.598H0.180054C0.180054 253.584 1.34227 257.484 3.52445 260.82L4.36131 260.272ZM39.1775 313.497L4.36131 260.272L3.52445 260.82L38.3407 314.045L39.1775 313.497ZM54.0931 322.272C48.0246 321.834 42.5082 318.589 39.1775 313.497L38.3407 314.045C41.8421 319.397 47.6414 322.809 54.0212 323.269L54.0931 322.272ZM278.189 338.439L54.0931 322.272L54.0212 323.269L278.117 339.437L278.189 338.439ZM298.102 325.123C295.294 333.597 287.092 339.082 278.189 338.439L278.117 339.437C287.476 340.112 296.1 334.346 299.051 325.438L298.102 325.123ZM314.67 275.125L298.102 325.123L299.051 325.438L315.619 275.44L314.67 275.125ZM301.581 250.261C312.207 253.336 318.149 264.625 314.67 275.125L315.619 275.44C319.277 264.401 313.03 252.534 301.859 249.3L301.581 250.261ZM259.673 238.129L301.581 250.261L301.859 249.3L259.951 237.169L259.673 238.129ZM253.241 234.917C256.223 234.773 258.517 236.743 259.411 237.947L260.214 237.351C259.211 236 256.635 233.752 253.192 233.918L253.241 234.917ZM252.672 234.272L252.728 234.527L253.704 234.309L253.647 234.054L252.672 234.272ZM252.478 233.451C252.546 233.724 252.61 233.997 252.672 234.272L253.647 234.054C253.584 233.772 253.518 233.49 253.449 233.21L252.478 233.451ZM253.124 228.701C253.594 229.361 253.683 230.098 253.538 230.854C253.391 231.62 253.005 232.388 252.551 233.047L253.375 233.614C253.874 232.888 254.338 231.991 254.52 231.042C254.705 230.082 254.601 229.052 253.939 228.121L253.124 228.701ZM250.571 227.25C251.754 227.432 252.624 227.998 253.124 228.701L253.939 228.121C253.265 227.175 252.144 226.481 250.723 226.261L250.571 227.25ZM233.612 209.89C240.98 213.574 246.791 219.628 250.194 226.966L251.101 226.545C247.604 219.004 241.632 212.782 234.06 208.995L233.612 209.89ZM224.856 198.978C228.683 201.61 231.647 205.316 233.372 209.628L234.3 209.257C232.502 204.761 229.413 200.898 225.422 198.154L224.856 198.978ZM221.514 196.68L224.856 198.978L225.422 198.154L222.08 195.856L221.514 196.68ZM210.275 184.596C213.088 189.401 216.926 193.526 221.514 196.68L222.08 195.856C217.613 192.785 213.877 188.768 211.137 184.091L210.275 184.596ZM209.798 183.783L210.275 184.596L211.137 184.091L210.661 183.278L209.798 183.783ZM184.244 164.652C194.976 167.327 204.195 174.216 209.798 183.783L210.661 183.278C204.921 173.478 195.478 166.422 184.486 163.682L184.244 164.652Z";


const PartList = [
  {
    clipPath: dAppClipPath,
    className:
      "origin-top-left absolute top-[4%] left-[4%] w-[542px] h-[278px]",
    src: "dApps.svg",
    maskSrc: "mask-dApps.svg",
    indicatorClass: "absolute right-[60px] top-[20px] z-10",
    buttonClass: "rotate-[2.58deg] mb-[8px]",
    arrowClass: "relative left-[calc(50%-34px)]",
    btnText: "dApps",
    link: "/dapps",
    ArrowIcon: dAppArrowIcon
  },
  {
    clipPath: 'unset',
    className: "origin-top-left absolute top-[4%] left-[42%] w-[471px] h-[238px]",
    src: "earn.svg",
    maskSrc: "mask-earn.svg",
    indicatorClass: "absolute right-[164px] top-[12px] z-10",
    buttonClass: "rotate-[2.58deg] mb-[8px]",
    arrowClass: "relative left-[calc(50%-34px)]",
    btnText: "Earn Yield",
    link: "/earn",
    ArrowIcon: dAppArrowIcon
  },
  {
    className:
      "origin-top-left absolute top-[32.5%] left-[21%] w-[433px] h-[342px]",
    clipPath: marketplaceClipPath,
    src: "marketplace.svg",
    maskSrc: "mask-marketplace.svg",
    indicatorClass: "absolute left-[7%] bottom-[22%] z-10 flex items-center",
    buttonClass: "rotate-[-5deg] mr-[10px]",
    arrowClass: "relative top-[-20px]",
    btnText: "Token Marketplace",
    link: "/marketplace",
    ArrowIcon: MarketPlaceArrowIcon
  },
  {
    className:
      "origin-bottom-right absolute bottom-[5.5%] right-[25.5%] w-[437px] h-[240px]",
    clipPath: bridgeClipPath,
    src: "bridge.svg",
    maskSrc: "mask-bridge.svg",
    indicatorClass: "absolute left-[23%] top-[5%] z-10",
    buttonClass: "rotate-[2.58deg] mb-[8px]",
    arrowClass: "relative left-[calc(50%)]",
    btnText: "Bridge",
    link: "/bridge",
    ArrowIcon: BridgeArrowIcon
  },
  {
    className:
      "origin-top-right absolute top-[45%] right-[4.2%] w-[338px] h-[338px]",
    clipPath: 'unset',
    src: "dashboard.svg",
    maskSrc: "mask-dashboard.svg",
    indicatorClass: "absolute right-[-4%] top-[20%] z-10",
    buttonClass: "rotate-[2.58deg] mb-[8px]",
    arrowClass: "relative left-[calc(50%-34px)]",
    btnText: "Portfolio",
    link: "/portfolio",
    ArrowIcon: dAppArrowIcon,
    disabled: false
  },
  {
    className:
      'origin-bottom-left absolute left-[6.3%] bottom-[10.8%] w-[317px] h-[351px]',
    clipPath: 'unset',
    src: 'cave.svg',
    maskSrc: 'mask-cave.svg',
    indicatorClass: 'absolute left-[2%] top-[15%] z-10',
    buttonClass: 'rotate-[-10deg] mb-[8px]',
    arrowClass: 'relative left-[50%]',
    btnText: 'Bera Cave',
    link: '/cave',
    ArrowIcon: caveArrowIcon,
    disabled: true,
    disabledIcon: 'cave-lock.svg'
  },
  {
    // bgt
    className:
      "origin-bottom-right absolute right-[19%] bottom-[42%] w-[442px] h-[264px]",
    clipPath: 'unset',
    src: "bgt.svg",
    maskSrc: "mask-bgt.svg",
    indicatorClass: "absolute left-[3%] bottom-[-12.5%] z-10",
    buttonClass: "rotate-[-10deg] mb-[8px]",
    arrowClass: "relative left-[50%] translate-x-[50px] translate-y-[-150px]",
    btnText: "BGT Town hall",
    link: "/hall",
    ArrowIcon: beramasArrowIcon,
    disabled: false,
  }
];

const MapItem = ({
  className = "",
  clipPath = "",
  src = "",
  maskSrc = "",
  styles = {},
  indicatorClass = "",
  buttonClass = "",
  arrowClass = "",
  ArrowIcon,
  onNavigateTo = () => {},
  btnText = "",
  link,
  disabled,
  disabledIcon
}: any) => {
  const [isHovered, setIsHovered] = useState(false);

  const IndicatorButton = () => {
    return (
      <motion.div
        className={indicatorClass}
        animate={{
          y: !disabled && isHovered ? -5 : 0
        }}
      >
        <div className={buttonClass}>
          <button className="rounded-[4px] before:rounded-[4px] before:content-[''] before:absolute before:top-[4px] before:left-[4px] before:z-[-1] before:w-full before:h-full before:bg-[#866224] before:border-black before:border relative bg-[#E9B965] border border-black font-CherryBomb text-[30px] leading-[0.9] px-[16px] py-[6px]">
            {btnText}
          </button>
        </div>
        <div className={arrowClass}>
          <ArrowIcon />
        </div>
      </motion.div>
    );
  };

  return (
    <div className={`${className}`} style={styles}>
      {btnText && <IndicatorButton />}
      <motion.div
        style={{ clipPath: `path("${clipPath}")` }}
        className="w-full h-full"
        whileHover={link && !disabled ? "animate" : "default"}
        onHoverStart={() => setIsHovered(true)}
        onHoverEnd={() => setIsHovered(false)}
        initial="default"
        variants={{
          animate: {
            y: -5
          },
          default: {
            y: 0
          }
        }}
        onClick={onNavigateTo}
      >
        <motion.img
          className="absolute top-0 left-0 z-[1] w-full"
          src={`/images/map/${disabled ? disabledIcon : src}`}
          alt=""
        />
        <motion.img
          variants={{
            animate: {
              display: "none",
              opacity: 0.1
            },
            default: {
              display: "block",
              opacity: 1
            }
          }}
          className="absolute top-0 left-0 z-[2] w-full"
          src={`/images/map/${maskSrc}`}
          alt=""
        />
      </motion.div>
    </div>
  );
};

const MapModal = () => {
  const store: any = useMapModalStore();
  const { handleReport } = useClickTracking();
  const christmas = useChristmas();

  const modalRef = useRef<any>(null);
  const [visible, setVisible] = useState<boolean>(false);

  const router = useRouter();

  const [windowWidth, setWindowWidth] = useState<number | undefined>(undefined);
  const [isClient, setIsClient] = useState(false);

  const entries = useMemo(() => {
    if (!christmas?.isChristmas) {
      return PartList;
    }
    return [
      ...PartList
      // {
      //   className:
      //     "origin-bottom-right absolute right-[6.3%] bottom-[20%] w-[149px] h-[269px]",
      //   clipPath: "unset",
      //   src: "beramas.svg",
      //   maskSrc: "mask-beramas.svg",
      //   indicatorClass: "absolute left-[2%] bottom-[-32.5%] z-10",
      //   buttonClass: "rotate-[-10deg] mb-[8px]",
      //   arrowClass:
      //     "relative left-[50%] translate-x-[50px] translate-y-[-150px]",
      //   btnText: "Bera's Wonderland",
      //   link: christmas.path,
      //   ArrowIcon: beramasArrowIcon
      // }
    ];
  }, [PartList, christmas]);

  useEffect(() => {
    if (typeof window !== "undefined") {
      setWindowWidth(window.innerWidth);

      const handleResize = () => setWindowWidth(window.innerWidth);
      window.addEventListener("resize", handleResize);

      return () => window.removeEventListener("resize", handleResize);
    }
  }, []);

  const onNavigateTo = (link?: string) => {
    if (!link) {
      return;
    }
    switch (link) {
      case "/dapps":
        handleReport("1010-001-001");
        break;
      case "/marketplace":
        handleReport("1010-001-003");
        break;
      case "/bridge":
        handleReport("1010-001-004");
        break;
      case "/portfolio":
        handleReport("1010-001-005");
        break;
      case "/cave":
        handleReport("1010-001-002");
        break;
      case "/earn":
        handleReport("1010-001-006");
        break;
      default:
        break;
    }
    store.setOpen(false);
    router.push(link);
  };

  useEffect(() => {
    setVisible(store.open);

    const handleResize = () => {
      setWindowWidth(window.innerWidth);
    };

    window.addEventListener("resize", handleResize);

    return () => {
      window.removeEventListener("resize", handleResize);
    };
  }, [store.open]);

  useEffect(() => {
    setIsClient(true);
  }, []);

  const realWidth = useMemo(() => {
    // @ts-ignore
    if (windowWidth * 0.8 >= 1470) {
      return 1470;
    }
    // @ts-ignore
    if (windowWidth <= 768) {
      return 768;
    }
    // @ts-ignore
    return windowWidth * 0.8;
  }, [windowWidth]);

  const onClose = () => {
    setVisible(false);
    const timer = setTimeout(() => {
      clearTimeout(timer);
      store.setOpen(false);
    }, 100);
  };

  if (!isClient) {
    return null;
  }

  return ReactDOM.createPortal(
    <AnimatePresence mode="wait">
      {store.open ? (
        <motion.div
          className="cursor-pointer fixed z-[50] w-full h-full left-0 top-0 bg-[rgba(0,_0,_0,_.5)] backdrop-blur-md"
          onClick={(e) => {
            if (modalRef.current.contains(e.target)) {
              return;
            }
            onClose();
          }}
          variants={{
            closed: {
              opacity: 0
            },
            open: {
              opacity: 1
            }
          }}
          initial="closed"
          animate="open"
          exit="closed"
        >
          <div
            ref={modalRef}
            className="absolute rounded-[0] z-[51] left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%]"
          >
            <AnimatePresence mode="wait">
              {visible ? (
                <motion.div
                  className='relative w-[80vw] min-w-[768px] max-w-[1470px] bg-[url("/images/map/background.svg")] bg-no-repeat bg-center bg-contain overflow-hidden origin-top mt-[20px]'
                  initial="closed"
                  animate="open"
                  exit="closed"
                  variants={{
                    closed: {
                      scaleY: 0,
                      opacity: 0
                    },
                    open: {
                      scaleY: 1,
                      opacity: 1,
                      transition: {
                        delay: 0.1
                      }
                    }
                  }}
                  style={{
                    height: (realWidth ?? 1470) * 0.53
                  }}
                >
                  <div
                    className="absolute right-[10px] top-0"
                    onClick={onClose}
                  >
                    <IconClose />
                  </div>
                  {entries.map((item) => (
                    <MapItem
                      key={item.src}
                      onNavigateTo={() =>
                        !item.disabled && onNavigateTo(item.link)
                      }
                      {...item}
                      styles={{
                        scale: (realWidth ?? 1470) / 1470,
                        // opacity: item.disabled ? 0.5 : 1
                      }}
                    />
                  ))}
                </motion.div>
              ) : null}
            </AnimatePresence>
          </div>
        </motion.div>
      ) : null}
    </AnimatePresence>,
    document.body
  );
};

export default MapModal;
